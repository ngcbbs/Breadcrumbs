# AI 시스템

## 몬스터 AI

### 기본 행동 패턴
- **패트롤**: 지정된 경로나 영역을 순찰하는 기본 행동
  - 웨이포인트 기반 이동 시스템
  - 랜덤 방랑 및 영역 기반 패트롤
  - 시간 기반 패턴 변화
- **추적**: 플레이어 감지 시 추적 행동
  - 시야 및 청각 기반 감지 시스템
  - 경로 탐색(A* 또는 NavMesh) 기반 추적
  - 장애물 우회 및 최적 경로 계산
- **공격**: 플레이어 접근 시 공격 행동
  - 거리 및 각도 기반 공격 패턴
  - 멀티 단계 공격 시퀀스
  - 특수 능력 및 스킬 사용 결정

### 몬스터 유형별 AI
- **근접 몬스터**: 플레이어에게 접근하여 공격하는 AI
  - 돌진, 회전 공격, 콤보 공격 등 다양한 패턴
  - 플레이어 회피 동작 대응
  - 군집 행동 및 협동 공격
- **원거리 몬스터**: 거리를 유지하며 투사체를 발사하는 AI
  - 플레이어 이동 예측 조준
  - 유리한 위치 선점 및 유지
  - 접근 시 회피 및 거리 확보 행동
- **보스 몬스터**: 복잡한 패턴과 단계별 행동을 가진 AI
  - 체력 기반 단계 전환
  - 광역 공격 및 소환 능력
  - 취약 상태 및 회복 메커니즘

### 난이도 조절 시스템
- **동적 난이도 조정**: 플레이어 성능에 따른 난이도 조절
  - 플레이어 수준 및 장비 감지
  - 실시간 행동 패턴 조정
  - 스폰 빈도 및 타이밍 조절
- **몬스터 스탯 스케일링**: 게임 진행에 따른 몬스터 능력치 조정
  - 플레이어 레벨 기반 스탯 조정
  - 파티 크기에 따른 체력 스케일링
  - 특수 능력 잠금 해제 및 강화
- **AI 행동 복잡성**: 난이도별 상이한 AI 행동 패턴
  - 낮은 난이도: 예측 가능한 단순 패턴
  - 중간 난이도: 기본 대응 및 회피 행동
  - 높은 난이도: 플레이어 행동 대응 및 고급 전술

### 그룹 행동 시스템
- **무리 행동**: 여러 몬스터의 조직적 행동
  - 리더-팔로워 구조
  - 포위 및 협동 전술
  - 상호 지원 및 보강
- **영역 제어**: 몬스터 집단의 영역 기반 행동
  - 영역 방어 및 침입자 대응
  - 자원 및 중요 위치 보호
  - 영역 회복 및 재점령 행동
- **역할 기반 협동**: 다양한 역할의 몬스터 간 협동
  - 탱커, 딜러, 서포터 등 역할 구분
  - 상황 인식 기반 역할 전환
  - 전투 진행에 따른 전술 변경

## 환경 상호작용 AI

### 함정 및 장애물
- **함정 활성화**: 플레이어 접근 시 함정 작동 로직
  - 감지 및 트리거 메커니즘
  - 타이밍 및 패턴 기반 활성화
  - 다단계 함정 시퀀스
- **지능형 장애물**: 플레이어 진행을 방해하는 동적 장애물
  - 움직이는 장애물 및 플랫폼
  - 환경 변화에 반응하는 구조물
  - 플레이어 행동에 대응하는 방어 시스템

### 상호작용 가능한 오브젝트
- **문 및 잠금 장치**: 던전 내 이동을 제어하는 오브젝트
  - 열쇠 및 퍼즐 기반 잠금 해제
  - 타이밍 기반 개폐 시스템
  - 파괴 가능한 장애물
- **상자 및 컨테이너**: 전리품 및 자원을 제공하는 오브젝트
  - 등급별 상자 및 보상 시스템
  - 함정이 설치된 미믹 상자
  - 특수 상호작용 요구 컨테이너
- **환경 기믹**: 던전 환경을 변화시키는 메커니즘
  - 레버, 압력판, 스위치 등 상호작용 요소
  - 다단계 퍼즐 및 기믹 시스템
  - 시간 제한 도전 과제

### 환경 반응 시스템
- **파괴 가능한 환경**: 전투 및 상호작용으로 변화하는 환경
  - 파괴 가능한 벽, 기둥, 바리케이드
  - 물리 기반 파괴 시뮬레이션
  - 환경 파괴를 통한 새로운 경로 및 숨겨진 영역
- **요소 상호작용**: 불, 물, 독 등 환경 요소 간 상호작용
  - 요소 확산 및 반응 시스템
  - 요소 기반 퍼즐 및 도전
  - 전투 전략에 활용 가능한 환경 효과
- **날씨 및 시간 변화**: 던전 내 환경 조건 변화
  - 시간 경과에 따른 빛 및 시야 변화
  - 특수 지역의 기상 효과
  - 환경 조건에 따른 몬스터 행동 변화

## 지능형 파티클 및 시각 효과

### 반응형 파티클 시스템
- **전투 반응**: 타격, 폭발, 마법 등 전투 행동에 대한 시각적 피드백
  - 충돌 지점 기반 파티클 생성
  - 무기 및 스킬 유형별 차별화된 효과
  - 환경과 상호작용하는 파티클(물 튀김, 먼지 등)
- **환경 파티클**: 던전 환경을 풍부하게 하는 주변 효과
  - 토치 불꽃, 안개, 먼지 등 분위기 요소
  - 지역 특성을 강조하는 환경 효과
  - 동적으로 생성되고 소멸하는 파티클

### AI 기반 시각 효과
- **지능형 광원**: 상황에 따라 변화하는 동적 조명
  - 전투 및 이벤트에 반응하는 조명 변화
  - 몬스터 및 마법 효과에 따른 컬러 변화
  - 시야 및 스텔스 메커니즘과 연계된 그림자 처리
- **시각적 내러티브**: 던전의 스토리와 분위기를 강화하는 효과
  - 지역 역사를 암시하는 시각적 단서
  - 임박한 위험을 예고하는 환경 변화
  - 플레이어 행동에 반응하는 분위기 요소

## AI 시스템 아키텍처

### 의사 결정 시스템
- **행동 트리(Behavior Tree)**: 계층적 AI 의사 결정 구조
  - 조건부 분기 및 시퀀스
  - 우선순위 기반 행동 선택
  - 실시간 상황 평가 및 적응
- **유한 상태 기계(FSM)**: 명확한 상태 전환 기반 AI
  - 상태별 특화된 행동 및 전환 조건
  - 중첩 및 계층적 상태 구조
  - 시각적 디버깅 및 튜닝 도구
- **유틸리티 AI**: 점수 기반의 유연한 의사 결정
  - 다중 요소 고려 행동 평가
  - 동적 가중치 및 조건부 평가
  - 예측 및 시뮬레이션 기반 결정

### 감지 및 인지 시스템
- **시각 시스템**: 몬스터의 시야 및 감지 로직
  - 시야각, 거리, 장애물 고려
  - 조명 조건에 따른 감지 변화
  - 플레이어 은신 및 위장 대응
- **청각 시스템**: 소리 기반 몬스터 반응
  - 소리 전파 및 감쇠 시뮬레이션
  - 소리 종류별 차별화된 반응
  - 소음 수준에 따른 경계 상태
- **기억 시스템**: 몬스터의 정보 유지 및 공유
  - 플레이어 마지막 위치 기억
  - 경보 및 정보 전파
  - 시간 경과에 따른 기억 감쇠

### 성능 최적화
- **LOD(Level of Detail) AI**: 거리 기반 AI 복잡성 조절
  - 플레이어 근처의 상세한 AI 처리
  - 원거리 몬스터의 간소화된 행동
  - 비활성 지역의 AI 일시 중지
- **배치 처리**: 다수 몬스터의 효율적 처리
  - 그룹 단위 의사 결정 및 업데이트
  - 동시 경로 탐색 최적화
  - 중복 계산 감소 기법
- **비동기 처리**: 무거운 AI 작업의 분산 처리
  - 경로 탐색 작업 스레드 분리
  - 시야 계산 및 감지 처리 분산
  - 프레임 기반 처리 분배

### 디버깅 및 분석 도구
- **AI 시각화**: AI 상태 및 결정 시각화 도구
  - 행동 트리 및 상태 디버그 뷰
  - 몬스터 시야 및 감지 범위 표시
  - 경로 탐색 및 목표 시각화
- **성능 모니터링**: AI 시스템 성능 분석
  - AI별 처리 시간 측정
  - 병목 현상 감지 및 보고
  - 최적화 제안 및 자동 조정
- **AI 행동 기록**: 게임플레이 분석을 위한 데이터 수집
  - 몬스터 행동 및 결정 로깅
  - 플레이어-AI 상호작용 패턴 분석
  - 밸런싱을 위한 통계 데이터 수집

[목차로 돌아가기](./MasterPlan.md)
