# 1주차: 기반 시스템 구축

## 개요

1주차는 포트폴리오 프로젝트의 기초를 닦는 중요한 단계입니다. 이 기간 동안 프로젝트 구조를 설정하고, MagicOnion 프레임워크를 통합하며, 프로시저럴 던전 생성 알고리즘의 기초 구현을 완료하는 것이 목표입니다. 견고한 기반을 구축함으로써 이후 주차의 개발이 원활하게 진행될 수 있도록 합니다.

## 세부 작업 계획

### 일 1-2: 프로젝트 설정 및 아키텍처 설계

#### 프로젝트 초기화
- Unity 프로젝트 생성 (2022.3 LTS 버전)
- 버전 관리 시스템 설정 (Git 저장소)
- 기본 폴더 구조 및 네임스페이스 정의
- 개발 환경 구성 (Visual Studio/Rider 설정)

#### 아키텍처 설계
- 클래스 다이어그램 및 시스템 설계
- 데이터 흐름 및 상호작용 설계
- 디자인 패턴 선택 및 적용 계획
- ScriptableObject 데이터 구조 설계

> **관련 예제 파일:**
> - [프로젝트 구조 및 아키텍처 예시](./Examples/Week1/ProjectStructure.md)
> - [게임 매니저 클래스 예시](./Examples/Week1/GameManager.md)

### 일 3-4: MagicOnion 통합 및 네트워크 기초 구조

#### MagicOnion 패키지 통합
- MagicOnion 및 필수 패키지 설치
- MessagePack 설정 및 리졸버 구성
- 기본 네트워크 서비스 및 허브 인터페이스 정의
- 클라이언트-서버 통신 테스트 환경 구축

#### 네트워크 관리자 구현
- 네트워크 매니저 클래스 구현
- 서버 연결 및 세션 관리 기본 구조
- 오류 처리 및 재연결 메커니즘
- 기본 네트워크 메시지 형식 정의

> **관련 예제 파일:**
> - [네트워크 인터페이스 예시](./Examples/Week1/NetworkInterfaces.md)

#### 기본 서버 구현
- 간단한 MagicOnion 서버 프로젝트 설정
- 게임 서비스 및 허브 기본 구현
- 로컬 테스트 환경 구성
- 연결 및 기본 메시지 교환 테스트

### 일 5-6: 프로시저럴 던전 생성 알고리즘 기초

#### 데이터 구조 및 모델
- 타일, 방, 복도 등 기본 데이터 구조 정의
- 던전 생성 매개변수 및 구성 클래스 구현
- 던전 템플릿 ScriptableObject 설계
- 테마 및 스타일 데이터 구조 구현

#### BSP(Binary Space Partitioning) 알고리즘 구현
- 초기 공간 분할 알고리즘 구현
- 재귀적 분할 및 방 생성 로직
- 방 간 연결 (복도 생성) 알고리즘
- 알고리즘 매개변수 조정 및 테스트

> **관련 예제 파일:**
> - [던전 생성기 클래스 예시](./Examples/Week1/DungeonGenerator.md)

#### 시각적 표현 및 테스트
- 기본 그리드 시스템 구현
- 2D/3D 던전 시각화 도구 구현
- 다양한 매개변수로 던전 생성 테스트
- 생성 결과 시각화 및 분석

### 일 7: 통합 및 최적화

#### 시스템 통합
- 던전 생성기와 네트워크 시스템 기초 통합
- 던전 데이터 직렬화 및 네트워크 전송 테스트
- 기본 Unity 씬 구성 및 오브젝트 배치
- 초기 시스템 간 통신 구현

#### 성능 최적화 및 버그 수정
- 던전 생성 성능 프로파일링
- 필요한 최적화 수행
- 식별된 버그 수정
- 확장성 검토 및 개선

#### 1주차 목표 검토 및 문서화
- 구현된 기능 점검 및 평가
- 문제점 및 학습 사항 기록
- 코드 리팩토링 및 주석 정리
- 2주차 계획 조정 및 세부화

> **관련 예제 파일:**
> - [개발 일지 템플릿 및 예시](./Examples/Week1/DevelopmentDiary.md)

## 주요 산출물

1. **Unity 프로젝트 기본 구조**
   - 폴더 구조 및 네임스페이스 정의
   - 핵심 관리자 클래스 구현
   - 기본 데이터 구조 및 인터페이스

2. **MagicOnion 통합 구조**
   - 네트워크 인터페이스 및 메시지 정의
   - 기본 클라이언트-서버 통신 구현
   - 테스트 서버 환경

3. **던전 생성 시스템**
   - BSP 알고리즘 구현
   - 기본 던전 생성 및 표현
   - 던전 시각화 도구

4. **기술 문서 및 다이어그램**
   - 시스템 아키텍처 다이어그램
   - 클래스 구조 문서
   - 알고리즘 설명 및 예시

## 목표 달성 기준

- [ ] Unity 프로젝트가 올바르게 설정되고 기본 구조가 정의됨
- [ ] MagicOnion이 성공적으로 통합되고 기본 통신이 테스트됨
- [ ] BSP 알고리즘이 구현되고 기본 던전이 생성됨
- [ ] 생성된 던전이 시각적으로 표현되고 검증됨
- [ ] 기본 시스템 간 통합이 구현됨

## 위험 및 대응 계획

| 위험 | 가능성 | 영향 | 대응 전략 |
|------|--------|------|-----------|
| MagicOnion 통합 문제 | 높음 | 높음 | 초기 간단한 통신 테스트로 시작, 문제 발생 시 공식 문서와 예제 참조, 필요시 대체 네트워크 라이브러리 고려 |
| 던전 생성 알고리즘 복잡성 | 중간 | 중간 | 단계적 구현 접근법, 기본 기능 먼저, 필요시 알고리즘 단순화 |
| 시간 부족 | 중간 | 높음 | 우선순위 관리, MVP(최소 기능 제품) 접근법, 필요시 범위 조정 |
| 기술적 부채 축적 | 낮음 | 중간 | 매일 코드 리뷰 및 리팩토링 시간 할당, 문서화 유지 |

## 학습 자원

- MagicOnion 공식 문서 및 예제
- 던전 생성 알고리즘 관련 학술 자료 및 튜토리얼
- Unity 네트워킹 모범 사례 가이드
- 프로시저럴 콘텐츠 생성 참고 자료

## 일일 작업 체크리스트

### 일 1
- [ ] Unity 프로젝트 생성 및 설정
- [ ] 기본 폴더 구조 생성
- [ ] Git 저장소 초기화 및 .gitignore 설정
- [ ] 프로젝트 네임스페이스 및 어셈블리 정의

### 일 2
- [ ] 핵심 관리자 클래스 설계 및 구현
- [ ] 기본 데이터 구조 및 인터페이스 정의
- [ ] 시스템 간 상호작용 설계
- [ ] ScriptableObject 데이터 구조 구현

### 일 3
- [ ] MagicOnion 및 필수 패키지 설치
- [ ] MessagePack 설정 및 리졸버 구성
- [ ] 기본 네트워크 서비스 및 허브 인터페이스 정의
- [ ] 간단한 통신 테스트 코드 작성

### 일 4
- [ ] 네트워크 매니저 클래스 구현
- [ ] 서버 연결 및 세션 관리 코드 작성
- [ ] 오류 처리 및 재연결 메커니즘 구현
- [ ] 기본 서버 프로젝트 설정 및 테스트

### 일 5
- [ ] 던전 관련 데이터 구조 정의
- [ ] 던전 생성 매개변수 및 구성 클래스 구현
- [ ] BSP 노드 클래스 및 기본 구조 구현
- [ ] 초기 공간 분할 알고리즘 구현

### 일 6
- [ ] 방 생성 및 배치 로직 구현
- [ ] 복도 연결 알고리즘 구현
- [ ] 시각화 도구 개발
- [ ] 다양한 매개변수로 알고리즘 테스트

### 일 7
- [ ] 던전 생성기와 네트워크 시스템 기초 통합
- [ ] 던전 데이터 직렬화 및 네트워크 전송 테스트
- [ ] 성능 프로파일링 및 최적화
- [ ] 버그 수정 및 코드 정리
- [ ] 주간 진행 상황 리뷰 및 문서화

## 1주차 성공 기준

1주차 작업이 성공적으로 완료되면 다음과 같은 결과물이 있어야 합니다:

1. 기본적인 Unity 프로젝트 구조와 아키텍처가 설정됨
2. MagicOnion이 통합되어 기본적인 네트워크 통신이 가능함
3. BSP 알고리즘을 사용한 기본 던전 생성기가 작동함
4. 생성된 던전을 시각적으로 확인할 수 있음
5. 던전 데이터를 네트워크를 통해 전송할 수 있음

이러한 기반 시스템이 준비되면, 2주차에는 핵심 게임플레이 요소를 구현하는 데 집중할 수 있습니다.

## 추가 및 개선 사항

### 던전 생성 알고리즘 확장

기본 BSP 알고리즘 외에도 다음과 같은 추가 알고리즘 구현을 고려할 수 있습니다:

1. **셀룰러 오토마타(Cellular Automata)**: 자연스러운 동굴 형태의 던전 생성
2. **드렁크 워크(Drunk Walk)**: 무작위적인 경로 생성으로 유기적인 던전 형태 구현
3. **보로노이 다이어그램**: 더 복잡한 구역 분할 및 방 생성

이러한 알고리즘은 기본 BSP 구현 후 시간이 허락하면 추가로 구현할 수 있습니다.

### 네트워크 최적화 전략

네트워크 통신 최적화를 위해 다음과 같은 전략을 고려할 수 있습니다:

1. **델타 압축**: 전체 상태가 아닌 변경된 부분만 전송
2. **지역 관심(AOI)**: 각 플레이어 주변의 관련 데이터만 전송
3. **예측 및 보간**: 클라이언트 측 예측을 통한 네트워크 트래픽 감소
4. **청크 기반 데이터 전송**: 대용량 던전 데이터를 작은 청크로 나누어 필요에 따라 전송

### 성능 모니터링 및 프로파일링

개발 초기 단계부터 성능 모니터링을 구현하여 최적화가 필요한 부분을 빠르게 식별할 수 있습니다:

1. **Unity 프로파일러 활용**: 던전 생성 및 네트워크 통신 성능 모니터링
2. **커스텀 프로파일링 도구**: 특정 알고리즘 및 함수의 성능 측정
3. **메모리 사용 분석**: 대규모 던전 생성 시 메모리 사용량 최적화
4. **병목 현상 식별 및 해결**: 초기부터 성능 병목 현상 식별 및 해결

이러한 추가 사항들은 기본 구현 완료 후 시간이 허락하는 범위 내에서 점진적으로 적용할 수 있습니다.

[메인 계획으로 돌아가기](./MasterPlan.md)
